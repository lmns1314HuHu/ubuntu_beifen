var Criteo;!function(a){var b;!function(a){var b;!function(a){"use strict";var b=function(){function a(a){this.name=a}return a.prototype.eval=function(a){},a}();a.AbstractEvent=b}(b=a.Event||(a.Event={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(a){"use strict";function b(a){"undefined"!=typeof console&&console.log("PubTag [DEBUG]:"+a)}function c(a){"undefined"!=typeof console&&console.log("PubTag [WARNING]:"+a)}function d(a){"undefined"!=typeof console?console.log("PubTag [ERROR]:"+a):alert("PubTag [ERROR]:"+a)}a.Debug=b,a.Warning=c,a.Error=d}(b=a.Log||(a.Log={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(a){"use strict";var b=function(){function a(){this._allowedPixelLoaded=!1,this._blockedPixelFailed=!1}return a.prototype.isAdBlocked=function(b,c){var d=this,e="https:"===b?"https:":"http:",f=e+a.allowedPixelUrl,g=e+a.blockedPixelUrl;this.createPixel(f,function(){d._allowedPixelLoaded=!0,d._blockedPixelFailed===!0&&c(!0)},function(){}),this.createPixel(g,function(){c(!1)},function(){d._blockedPixelFailed=!0,d._allowedPixelLoaded===!0&&c(!0)})},a.prototype.createPixel=function(a,b,c){var d=document.getElementsByTagName("script")[0],e=document.createElement("img");e.src=a,e.height=1,e.width=1,e.style.display="none",e.onload=b,e.onerror=c,"HTMLImageElement"==typeof e&&d.parentNode.insertBefore(e,d)},a.allowedPixelUrl="//static.criteo.net/images/pixel.gif?ch=1",a.blockedPixelUrl="//static.criteo.net/images/pixel.gif?ch=2",a}();a.AdBlocker=b}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(a){"use strict";var b=function(){function a(a,b){this._url=a,this._data=b}return a.prototype.send=function(a,b,c){var d=void 0!==this._data?"POST":"GET",e=this.getXMLHttpRequest(d,a,b,c);if(void 0!==e)e.send(this._data);else{var f=this.getXDomainRequest(d,a,b,c);void 0!==f&&f.send(this._data)}},a.prototype.getXMLHttpRequest=function(b,c,d,e){var f=new XMLHttpRequest;if("withCredentials"in f)return f.open(b,this._url,!0),f.timeout=a.LOCAL_PASSBACK_TIMEOUT,"POST"===b&&f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.withCredentials=!0,f.onload=function(){4===f.readyState&&200===f.status?c(f.responseText):d(f.readyState,f.status)},f.ontimeout=e,f},a.prototype.getXDomainRequest=function(b,c,d,e){if("undefined"!=typeof XDomainRequest){var f=new XDomainRequest;return f.timeout=a.LOCAL_PASSBACK_TIMEOUT,f.open(b,this._url),f.onload=function(){void 0!==f.responseText?c(f.responseText):d(void 0,void 0)},f.ontimeout=e,f}},a.LOCAL_PASSBACK_TIMEOUT=3e4,a}();a.AsyncRequest=b}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Criteo;!function(a){var b;!function(a){var b;!function(a){"use strict";var b=function(a){function b(c,d,e){a.call(this,b.NAME),this._condition=c,this._eventIfTrue=d,this._eventIfFalse=e}return __extends(b,a),b.prototype.eval=function(a){this._condition.apply(this)?this._eventIfTrue.eval(a):this._eventIfFalse.eval(a)},b.NAME="conditionalEvent",b}(a.AbstractEvent);a.ConditionalEvent=b}(b=a.Event||(a.Event={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(a){"use strict";var b=function(){function a(a,b){this.charset=a.charset?a.charset:a.characterSet?a.characterSet:"",this.highestAccessibleUrl=this.getHighestAccessibleUrl(b),this.location=b.location,this.protocol=b.location.protocol,this.dising=!1,this.ct0=void 0,this.wpdt0=void 0,this.isAdBlocked=void 0,this.rtaVarNames=[]}return a.prototype.getHighestAccessibleUrl=function(a){var b=this.getHighestAccessibleWindow(a),c=b.topFrame,d=b.err,e="";if(d)try{if(e=c.top.location.href,!e){var f=c.location.ancestorOrigins;e=f[f.length-1]}}catch(g){e=c.document.referrer}else e=c.location.href;return e},a.prototype.getHighestAccessibleWindow=function(a){var b=window,c=!1;try{for(;b.parent.document!==b.document;){if(!b.parent.document){c=!0;break}b=b.parent}}catch(d){c=!0}return{topFrame:b,err:c}},a}();a.Context=b}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(a){var b;!function(a){"use strict";var b=function(a){function b(c){a.call(this,b.NAME),this._function=c}return __extends(b,a),b.prototype.eval=function(a){this._function&&this._function.apply(this)},b.NAME="genericEvent",b}(a.AbstractEvent);a.Custom=b}(b=a.Event||(a.Event={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){"use strict";var b=function(){function b(){this._canProcessConditionalEvents=void 0,this._events=[],this.context=new a.PubTag.Context(document,window),this._adblocker=new a.PubTag.AdBlocker,a.Log.Debug("Publisher Tag loaded")}return b.prototype.push=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var c=0;c<a.length;++c){var d=a[c];this._events.push(d)}this.evalEvents()},b.prototype.checkAdblocker=function(){if(void 0===this._canProcessConditionalEvents){var a=this;this._canProcessConditionalEvents=!1,this._adblocker.isAdBlocked(this.context.protocol,function(b){a.context.isAdBlocked=b,a._canProcessConditionalEvents=!0,a.evalEvents()})}},b.prototype.evalEvents=function(){for(var a=0;a<this._events.length;)if("conditionalEvent"===this._events[a].name&&this._canProcessConditionalEvents===!1)a++;else{var b=this._events.splice(a,1);b[0].eval(this)}},b.VERSION=6,b}();a.PublisherTag=b}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(a){var b;!function(a){"use strict";!function(a){a[a.AFR=0]="AFR",a[a.AJS=1]="AJS"}(a.HandlerType||(a.HandlerType={}));a.HandlerType}(b=a.Display||(a.Display={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(a){"use strict";!function(a){a[a.Unspecified=0]="Unspecified",a[a.AMP=1]="AMP"}(a.IntegrationMode||(a.IntegrationMode={}));a.IntegrationMode}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(b){"use strict";var c=function(){function c(){var a=this;this.integrationMode=b.IntegrationMode.Unspecified,this.paramParser={},this.paramParser.integrationmode=function(b){a.integrationMode=a.parseIntegrationMode(b)}}return c.prototype.tryFillParameters=function(b){var c;for(c in b)if(void 0!==b[c]){var d=c.toLowerCase();this.paramParser[d]?this.paramParser[d](b[c]):a.Log.Warning("Unknown parameter: "+c)}},c.prototype.parseIntegrationMode=function(a){switch(a.toLowerCase()){case"amp":return b.IntegrationMode.AMP;default:return b.IntegrationMode.Unspecified}},c}();b.InputParameters=c}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(b){var c;!function(b){"use strict";var c=function(a){function b(b){var c=this;a.call(this),this.zoneid=void 0,this.async=void 0,this.containerid=void 0,this.width=void 0,this.height=void 0,this.callbackSuccess=void 0,this.callbackError=void 0,this.callIfNotAdblocked=void 0,this.passbackCode=void 0,this.publisherUrl=void 0,this.overridenWpdt0=void 0,this.overridenCt0=void 0,this.layout=void 0,this.overrideZoneFloor=!0,this.collapseContainerIfNotAdblocked=!0,this.extraData={},this.paramParser.zoneid=function(a){c.zoneid=a},this.paramParser.async=function(a){c.async=a===!0},this.paramParser.containerid=function(a){c.containerid=a},this.paramParser.width=function(a){c.width=a},this.paramParser.height=function(a){c.height=a},this.paramParser.callbacksuccess=function(a){c.callbackSuccess=a},this.paramParser.callbackerror=function(a){c.callbackError=a},this.paramParser.callifnotadblocked=function(a){c.callIfNotAdblocked=a},this.paramParser.passbackcode=function(a){c.passbackCode=a},this.paramParser.layout=function(a){c.layout=a},this.paramParser.publishercreativeconfiguration=this.paramParser.layout,this.paramParser.extradata=function(a){c.extraData=a},this.paramParser.publisherurl=function(a){c.publisherUrl=a},this.paramParser.wpdt0=function(a){c.overridenWpdt0=a},this.paramParser.ct0=function(a){c.overridenCt0=a},this.paramParser.overridezonefloor=function(a){c.overrideZoneFloor=a},this.paramParser.collapsecontainerifnotadblocked=function(a){c.collapseContainerIfNotAdblocked=a},a.prototype.tryFillParameters.call(this,b)}return __extends(b,a),b}(a.PubTag.InputParameters);b.DisplayInputParameters=c}(c=b.Display||(b.Display={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(b){var c;!function(c){"use strict";var d=function(){function d(){}return d.getRandomNumber=function(){return Math.floor(99999999999*Math.random())},d.prototype.buildUrl=function(e,f,g,h,i){var j;j=g===c.HandlerType.AFR?d.CAS_URL_AFR:d.CAS_URL_AJS;var k="https:"===f.protocol?"https:":"http:",l=k+j+"?ptv="+a.PublisherTag.VERSION;if(f.isAdBlocked===!0){var m=this.getAbpParameter(e,f);l+="&abp="+String(m)}g!==c.HandlerType.AFR&&(l+=void 0!==e.containerid&&""!==e.containerid?"&containerid="+encodeURIComponent(e.containerid):""),l+="&zoneid="+String(e.zoneid),l+=h?"&width="+h:"",l+=i?"&height="+i:"",l+="&cb="+String(d.getRandomNumber()),l+="&nodis="+(f.dising?"0":"1"),l+=f.charset?"&charset="+f.charset:"",l+=e.overridenCt0?"&ct0="+encodeURIComponent(e.overridenCt0):f.ct0?"&ct0="+encodeURIComponent(f.ct0):"",l+=e.overridenWpdt0?"&wpdt0="+encodeURIComponent(e.overridenWpdt0):f.wpdt0?"&wpdt0="+encodeURIComponent(f.wpdt0):"",l+=e.publisherUrl?"&publisherurl="+encodeURIComponent(e.publisherUrl):"";for(var n in e.extraData)void 0!==e.extraData[n]&&(l+="&"+n+"="+encodeURIComponent(e.extraData[n]));return l+=e.passbackCode?"&dlp=1":"",e.integrationMode!==b.IntegrationMode.Unspecified&&(l+="&im="+e.integrationMode),l+=f.highestAccessibleUrl?"&loc="+encodeURIComponent(f.highestAccessibleUrl).substring(0,1600):""},d.prototype.getAbpParameter=function(a,b){var c=b.isAdBlocked?1:0,d=a.overrideZoneFloor?0:2;return c|d},d.CAS_URL_AJS="//cas.criteo.com/delivery/ajs.php",d.CAS_URL_AFR="//cas.criteo.com/delivery/afr.php",d}();c.DisplayUrlBuilder=d}(c=b.Display||(b.Display={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(b){var c;!function(b){"use strict";var c=function(a){function b(b,c,d){a.call(this,b),this._displayParameters=d,this._urlBuilder=c}return __extends(b,a),b.prototype.eval=function(a){},b.prototype.buildCasUrl=function(a,b,c,d){return this._urlBuilder.buildUrl(this._displayParameters,a,b,c,d)},b}(a.PubTag.Event.AbstractEvent);b.DisplayEvent=c}(c=b.Display||(b.Display={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(a){var b;!function(a){"use strict";var b=function(b){function c(a,d,e){b.call(this,c.NAME,a,d),this._respectsEyeoDeal=e}return __extends(c,b),c.prototype.eval=function(c){var d=this._displayParameters.containerid,e=this._displayParameters.callbackSuccess,f=this._displayParameters.callbackError,g=this.buildCasUrl(c.context,a.HandlerType.AFR);if(b.prototype.eval.call(this,c),c.context.isAdBlocked){if(!this._respectsEyeoDeal)return;this.loadIframe(g,d,e,f)}else this.loadIframe(g,d,e,f)},c.prototype.loadIframe=function(a,b,c,d){var e=document.createElement("iframe");e.src=a,e.id="cto_iframe",e.frameBorder="0",e.hspace=0,e.vspace=0,e.marginWidth="0px",e.marginHeight="0px",e.width="100%",e.height="100%",e.scrolling="no",e.onload=c,e.onerror=d;var f=document.getElementById(b);f.appendChild(e)},c.NAME="displayAfr",c}(a.DisplayEvent);a.DisplayEventAFR=b}(b=a.Display||(a.Display={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(Criteo){var PubTag;!function(PubTag){var Display;!function(Display){"use strict";var DisplayEventAsync=function(_super){function DisplayEventAsync(a,b){_super.call(this,DisplayEventAsync.NAME,a,b)}return __extends(DisplayEventAsync,_super),DisplayEventAsync.prototype.eval=function(a){var b=this;_super.prototype.eval.call(this,a);var c=this._displayParameters.containerid,d=this._displayParameters.width,e=this._displayParameters.height,f=this._displayParameters.layout,g=this._displayParameters.callbackSuccess,h=this._displayParameters.callbackError,i=this._displayParameters.passbackCode;if(""===c||void 0===c)Criteo.Log.Error("No containerid provided");else if(void 0!==f){var j=DisplayEventAsync.CHAPI_NAME+"="+encodeURIComponent(JSON.stringify(f)),k=function(){var f=b.getContainerSize(c,d,e),k=b.buildCasUrl(a.context,void 0,f.width,f.height);b.loadScriptAsync(k,j,g,h,i)};void 0!==d&&void 0!==e?k():window.addEventListener?window.addEventListener("load",k,!1):window.attachEvent("onload",k)}else{var l=this.buildCasUrl(a.context);this.loadScriptAsync(l,void 0,g,h,i)}},DisplayEventAsync.prototype.loadScriptAsync=function(url,data,callBackSuccess,callbackFail,passbackCode){var request=new Criteo.PubTag.AsyncRequest(url,data);request.send(function(responseText){var pb=passbackCode?passbackCode:function(){};eval(responseText),void 0!==callBackSuccess&&callBackSuccess(responseText)},function(a,b){void 0!==passbackCode&&passbackCode(),void 0!==callbackFail&&callbackFail(a,b)},passbackCode)},DisplayEventAsync.prototype.getContainerSize=function(a,b,c){var d=document.getElementById(a),e=this.inIframe(),f=b?b:e?document.body.offsetWidth:d.offsetWidth,g=c?c:e?document.body.offsetHeight:d.offsetHeight;return 0!==g&&0!==f||(g=void 0,f=void 0),{width:f,height:g}},DisplayEventAsync.prototype.inIframe=function(){try{return window.self!==window.top}catch(a){return!0}},DisplayEventAsync.NAME="displayEventAsync",DisplayEventAsync.CHAPI_NAME="publisherCreativeConfiguration",DisplayEventAsync}(Display.DisplayEvent);Display.DisplayEventAsync=DisplayEventAsync}(Display=PubTag.Display||(PubTag.Display={}))}(PubTag=Criteo.PubTag||(Criteo.PubTag={}))}(Criteo||(Criteo={}));var Criteo;if(function(a){var b;!function(a){var b;!function(a){"use strict";var b=function(a){function b(c,d){a.call(this,b.NAME,c,d)}return __extends(b,a),b.prototype.eval=function(b){a.prototype.eval.call(this,b);var c=this.buildCasUrl(b.context);this.loadScriptSync(c)},b.prototype.loadScriptSync=function(a){document.write("<script type='text/javascript' src='"+a+"'></script>")},b.NAME="displaySync",b}(a.DisplayEvent);a.DisplayEventSync=b}(b=a.Display||(a.Display={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={})),!window.criteo_pubtag||window.criteo_pubtag instanceof Array){var oldQueuePub=window.criteo_pubtag||[];window.criteo_pubtag=new Criteo.PublisherTag,window.criteo_pubtag.push.apply(window.criteo_pubtag,oldQueuePub)}var Criteo;!function(a){var b;!function(b){var c;!function(b){"use strict";var c=function(){function b(){}return b.prototype.respectsEyeoDeal=function(a){var c=document.getElementById(a),d=this.respectsSizeConstraints(c);if(!d)return!1;var e=this.getNewRatiosFeatures(c),f=e.respectsAdRatioConstraint,g=f;return g&&(b.atfRatio=e.newAtfRatio,b.btfRatio=e.newBtfRatio),g},b.prototype.respectsSizeConstraints=function(b){var c=this.getAdLocationAttribute(b);switch(c){case"above-content":return b.offsetHeight<=200;case"in-content":return!1;case"below-content":return b.offsetHeight<=400;case"side-content":return b.offsetWidth<=350;default:return void 0!==c&&a.Log.Error("Unknown data-ad-loc attribute : "+c),!0}},b.prototype.getRatioAboveFold=function(a){var b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=a.getBoundingClientRect(),d=document.documentElement.scrollTop||document.body.scrollTop;return b>=c.bottom+d?1:b<=c.top+d?0:(b-c.top-d)/a.offsetHeight},b.prototype.getAdLocationAttribute=function(a){return a.getAttribute("data-ad-loc")?a.getAttribute("data-ad-loc"):void 0},b.prototype.getNewRatiosFeatures=function(a){var c=!1,d=this.getRatioAboveFold(a),e=a.offsetHeight*a.offsetWidth,f=screen.width*screen.height,g=b.atfRatio+d*e/f,h=b.btfRatio+(1-d)*e/f;return c=g<=.15&&h<=.25,{respectsAdRatioConstraint:c,newAtfRatio:g,newBtfRatio:h}},b.atfRatio=0,b.btfRatio=0,b}();b.EyeoDealValidator=c}(c=b.Display||(b.Display={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){"use strict";function b(b){var c=new a.PubTag.Display.DisplayInputParameters(b);if(c.async=c.async!==!1,void 0===c.zoneid)return void a.Log.Error("missing parameter 'zoneid'");if(void 0!==c.layout&&c.async===!1)return void a.Log.Error("Criteo hosted ads only work in async mode");if(c.async===!0&&(void 0===c.containerid||""===c.containerid))return void a.Log.Error("Missing parameter 'containerid' for an async display");c.async===!1&&void 0!==c.passbackCode&&(a.Log.Error("Criteo.DisplayAd does not support synchronous local passback"),c.passbackCode=void 0);var d;d=c.async?new a.PubTag.Display.DisplayEventAsync(new a.PubTag.Display.DisplayUrlBuilder,c):new a.PubTag.Display.DisplayEventSync(new a.PubTag.Display.DisplayUrlBuilder,c),window.criteo_pubtag.push(d)}function c(b){var c=new a.PubTag.Display.DisplayInputParameters(b);if(void 0===c.zoneid)return void a.Log.Error("missing parameter 'zoneid'");if(void 0===c.containerid||""===c.containerid)return void a.Log.Error("missing parameter 'containerid' to display acceptable ads");if(!d(document.getElementById(c.containerid)))return void a.Log.Error("can't display acceptable ad : the container \""+c.containerid+'" is not visible');window.criteo_pubtag.checkAdblocker();var e,f=new a.PubTag.Display.EyeoDealValidator;e=new a.PubTag.Display.DisplayEventAFR(new a.PubTag.Display.DisplayUrlBuilder,c,f.respectsEyeoDeal(c.containerid));var g;g=new a.PubTag.Event.Custom(function(){if(c.collapseContainerIfNotAdblocked){var a=document.getElementById(c.containerid);a.style.display="none"}void 0!==c.callIfNotAdblocked&&c.callIfNotAdblocked()});var h,i=function(){return window.criteo_pubtag.context.isAdBlocked===!0};h=new a.PubTag.Event.ConditionalEvent(i,e,g),window.criteo_pubtag.push(h)}function d(a){if(a===document)return!0;if(!a)return!1;if(!a.parentNode)return!1;if(a.style){if("none"===a.style.display)return!1;if("hidden"===a.style.visibility)return!1}if(window.getComputedStyle){var b=window.getComputedStyle(a,"");if("none"===b.display)return!1;if("hidden"===b.visibility)return!1}var c=a.currentStyle;if(c){if("none"===c.display)return!1;if("hidden"===c.visibility)return!1}return d(a.parentNode)}a.DisplayAd=b,a.DisplayAcceptableAdIfAdblocked=c}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(b){var c;!function(b){"use strict";b.DefaultCrtgContentName="crtg_content",b.DefaultCrtgRtaCookieName="crtg_rta";var c=function(a){function b(b){var c=this;a.call(this),this.networkId=void 0,this.crtgContentName=void 0,this.crtgRtaCookieName=void 0,this.adserver=void 0,this.paramParser.networkid=function(a){c.networkId=a},this.paramParser.varname=function(a){c.crtgContentName=a},this.paramParser.cookiename=function(a){c.crtgRtaCookieName=a},this.paramParser.adserver=function(a){c.adserver=a},a.prototype.tryFillParameters.call(this,b)}return __extends(b,a),b}(a.PubTag.InputParameters);b.RtaInputParameters=c}(c=b.RTA||(b.RTA={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(b){var c;!function(c){"use strict";var d=function(){function c(){}return c.getRandomNumber=function(){return Math.floor(99999999999*Math.random())},c.prototype.buildUrl=function(d,e){var f="https:"===e.protocol?"https:":"http:",g=f+c.RTA_URL+"?ptv="+a.PublisherTag.VERSION;return e.isAdBlocked===!0&&(g+="&abp=1"),g+="&netid="+String(d.networkId),g+=d.crtgRtaCookieName?"&cookieName="+encodeURIComponent(d.crtgRtaCookieName):"",g+=d.crtgContentName?"&varName="+encodeURIComponent(d.crtgContentName):"",g+="&rnd="+String(c.getRandomNumber()),d.integrationMode!==b.IntegrationMode.Unspecified&&(g+="&im="+d.integrationMode),g},c.RTA_URL="//rtax.criteo.com/delivery/rta/rta.js",c}();c.RtaUrlBuilder=d}(c=b.RTA||(b.RTA={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(Criteo){var PubTag;!function(PubTag){var RTA;!function(RTA){"use strict";var RtaEvent=function(_super){function RtaEvent(a,b){_super.call(this,RtaEvent.NAME),this.urlBuilder=a,this.parameters=b}return __extends(RtaEvent,_super),RtaEvent.prototype.eval=function(a){_super.prototype.eval.call(this,a);var b=this.urlBuilder.buildUrl(this.parameters,a.context),c=new Criteo.PubTag.AsyncRequest(b),d=function(a,c){return Criteo.Log.Error("An error occured while calling "+b)},e=this.parameters.crtgContentName?this.parameters.crtgContentName:Criteo.PubTag.RTA.DefaultCrtgContentName,f=a.context.rtaVarNames.indexOf(e,0);f===-1&&a.context.rtaVarNames.push(e),c.send(this.executeScript,d)},RtaEvent.prototype.executeScript=function(responseText){eval(responseText)},RtaEvent.NAME="rtaEvent",RtaEvent}(Criteo.PubTag.Event.AbstractEvent);RTA.RtaEvent=RtaEvent}(RTA=PubTag.RTA||(PubTag.RTA={}))}(PubTag=Criteo.PubTag||(Criteo.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){var b;!function(b){var c;!function(b){"use strict";var c=function(b){function c(a,d){b.call(this,c.NAME),this.adserver=a,this.crtgContentName=d}return __extends(c,b),c.prototype.eval=function(b){if(void 0===this.adserver)return void a.Log.Error("undefined adserver");var c=b.context.rtaVarNames.indexOf(this.crtgContentName,0);c>-1&&b.context.rtaVarNames.splice(c,1);var d=this.extractKeyValuesFromCrtgContent(this.crtgContentName);switch(this.adserver.toLowerCase()){case"dfp":this.setTargetingDFP(d);break;default:a.Log.Error("unknown adserver '"+this.adserver+"'")}},c.prototype.extractKeyValuesFromCrtgContent=function(a){if(void 0===window[a]||""===window[a])return{};for(var b=window[a].split(";"),c={},d=0;d<b.length;d++)if(""!==b[d]){var e=b[d].split("=");if(2===e.length){var f=e[0],g=e[1];c[f]=c[f]||[],c[f].push(""+g)}}return c},c.prototype.setTargetingDFP=function(a){void 0===window.googletag&&(window.googletag={});var b=window.googletag;b.cmd=b.cmd||[],b.cmd.push(function(){for(var c in a)a.hasOwnProperty(c)&&b.pubads().setTargeting(""+c,""+a[c])})},c.NAME="rtaTargetingEvent",c}(a.PubTag.Event.AbstractEvent);b.RtaTargetingEvent=c}(c=b.RTA||(b.RTA={}))}(b=a.PubTag||(a.PubTag={}))}(Criteo||(Criteo={}));var Criteo;!function(a){"use strict";function b(b){var c=new a.PubTag.RTA.RtaInputParameters(b);if(void 0===c.networkId)return void a.Log.Error("missing parameter 'networkid'");var e=c.crtgContentName?c.crtgContentName:a.PubTag.RTA.DefaultCrtgContentName,f=c.crtgRtaCookieName?c.crtgRtaCookieName:a.PubTag.RTA.DefaultCrtgRtaCookieName;window[e]=d(f);var g=new a.PubTag.RTA.RtaEvent(new a.PubTag.RTA.RtaUrlBuilder,c);window.criteo_pubtag.push(g)}function c(b){var c=new a.PubTag.RTA.RtaInputParameters(b);if(void 0===c.adserver)return void a.Log.Error("missing parameter 'adserver'");var d=[];void 0!==c.crtgContentName?d.push(c.crtgContentName):window.criteo_pubtag.context.rtaVarNames.length>0?window.criteo_pubtag.context.rtaVarNames.forEach(function(a,b,c){d.push(a)}):d.push(a.PubTag.RTA.DefaultCrtgContentName),d.forEach(function(b,d,e){var f=new a.PubTag.RTA.RtaTargetingEvent(c.adserver,b);window.criteo_pubtag.push(f)})}function d(a){for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c],e=d.substr(0,d.indexOf("=")),f=d.substr(d.indexOf("=")+1);if(e=e.replace(/^\s+|\s+$/g,""),e===a)return decodeURIComponent(f)}return""}a.CallRTA=b,a.SetTargeting=c}(Criteo||(Criteo={}));
//# sourceMappingURL=publishertag.map